<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>学习笔记</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="新东西这么多 一个一个开始学">
<meta property="og:type" content="website">
<meta property="og:title" content="学习笔记">
<meta property="og:url" content="http://hjsang.github.io/page/3/index.html">
<meta property="og:site_name" content="学习笔记">
<meta property="og:description" content="新东西这么多 一个一个开始学">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Hejian Sang">
<meta property="article:tag" content="课程笔记，总结记录，阅读笔记">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="学习笔记" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 5.2.0"><link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">学习笔记</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://hjsang.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-Pandas-from-Zero-to-Hero" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/01/02/Pandas-from-Zero-to-Hero/" class="article-date">
  <time datetime="2021-01-03T01:15:10.000Z" itemprop="datePublished">2021-01-02</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/01/02/Pandas-from-Zero-to-Hero/">Pandas: from Zero to Hero</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>This article is also shown in <a target="_blank" rel="noopener" href="https://sanghj0923.medium.com/pandas-from-zero-to-hero-4322b333442c">medium</a>.  The treading takes around 5 minutes.</p>
<h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>In this article, we will learn the most common functions in Pandas. You should be able to use Pandas for:  loading &amp; saving data frames, select subsets, data manipulation and some other common functions.</p>
<h2 id="I-O"><a href="#I-O" class="headerlink" title="I/O"></a>I/O</h2><p>Pandas provides lots of I/O functions to handle different data formats. Their function names share the same patterns: reading functions are all “read_{data format}” and writing functions are all “to_{data format}”. For example, “read_pickle” is used to load pickled object from file and “to_pickle” is used to serialize object to file.  In this article, we focus on CSV files.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># import pandas</span></span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line"><span class="comment"># read csv file</span></span><br><span class="line">csv_data = pd.read_csv(filepath_or_buffer=<span class="string">&#x27;data.csv&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># save output to csv</span></span><br><span class="line">csv_data.to_csv(path_or_buf=<span class="string">&#x27;csv_data.csv&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h2 id="Select-Subset"><a href="#Select-Subset" class="headerlink" title="Select Subset"></a>Select Subset</h2><p>We can use “.loc” and “.iloc” to select subsets from the original dataframe. Prefer “.iloc” if we want to use the positions in the dataframe. Otherwise, we can use “.loc”.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># import pandas</span></span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="comment"># Create dataframe</span></span><br><span class="line">gender = [<span class="string">&#x27;M&#x27;</span>,<span class="string">&#x27;F&#x27;</span>]</span><br><span class="line">company = [<span class="string">&#x27;A&#x27;</span>,<span class="string">&#x27;B&#x27;</span>, <span class="string">&#x27;C&#x27;</span>]</span><br><span class="line">df = pd.DataFrame(&#123;<span class="string">&quot;age&quot;</span>: np.random.randint(<span class="number">10</span>,<span class="number">60</span>,<span class="number">100</span>),</span><br><span class="line">                  <span class="string">&quot;gender&quot;</span>: [gender[i] <span class="keyword">for</span> i <span class="keyword">in</span> np.random.randint(<span class="number">0</span>,<span class="number">2</span>,<span class="number">100</span>)],</span><br><span class="line">                   <span class="string">&quot;company&quot;</span>: [company[i] <span class="keyword">for</span> i <span class="keyword">in</span> np.random.randint(<span class="number">0</span>,<span class="number">3</span>,<span class="number">100</span>)],</span><br><span class="line">                  <span class="string">&quot;salary&quot;</span>: np.random.randint(<span class="number">100</span>,<span class="number">1000</span>,<span class="number">100</span>)&#125;)</span><br><span class="line"><span class="comment"># df looks like:</span></span><br><span class="line"><span class="comment">#   age gender  company salary</span></span><br><span class="line"><span class="comment"># 0 18  F A 132</span></span><br><span class="line"><span class="comment"># 1 41  F B 333</span></span><br><span class="line"><span class="comment"># 2 25  F A 981</span></span><br><span class="line"><span class="comment"># 3 26  M C 686</span></span><br><span class="line"><span class="comment"># 4 48  M B 530</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Select row [0,5] with all columns</span></span><br><span class="line">df.iloc[[<span class="number">0</span>,<span class="number">5</span>],:]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Select row [0,5] with columns [1,2]</span></span><br><span class="line">df.iloc[[<span class="number">0</span>,<span class="number">5</span>],[<span class="number">1</span>,<span class="number">2</span>]]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Select gender == &#x27;F&#x27;</span></span><br><span class="line">df.loc[df[<span class="string">&#x27;gender&#x27;</span>]==<span class="string">&#x27;F&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Select gender == &#x27;F&#x27; and company in [&#x27;A&#x27;, &#x27;B&#x27;]</span></span><br><span class="line">df.loc[(df[<span class="string">&#x27;gender&#x27;</span>]==<span class="string">&#x27;F&#x27;</span>) &amp; (df[<span class="string">&#x27;company&#x27;</span>].isin([<span class="string">&#x27;A&#x27;</span>,<span class="string">&#x27;B&#x27;</span>]))]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Select people with age &gt; 30 and salary &gt; 700 and show their salary</span></span><br><span class="line"></span><br><span class="line">df.loc[(df[<span class="string">&#x27;age&#x27;</span>]&gt;<span class="number">30</span>) &amp; (df[<span class="string">&#x27;salary&#x27;</span>]&gt;<span class="number">700</span>),<span class="string">&#x27;salary&#x27;</span>]</span><br></pre></td></tr></table></figure>
<h2 id="Manipulation"><a href="#Manipulation" class="headerlink" title="Manipulation"></a>Manipulation</h2><p>Pandas can perform most common data manipulations: Merge, GroupBy and Reshape.</p>
<h3 id="Merge"><a href="#Merge" class="headerlink" title="Merge"></a>Merge</h3><p>For “Merge” operation, there are:</p>
<ul>
<li>“Left” merge: use only keys from left frame</li>
<li>“Right” merge: use only keys from right frame</li>
<li>“Outer” merge: use union of keys from both frames</li>
<li>“Inner” merge: use intersection of keys from both frames</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Create two dataframes</span></span><br><span class="line">df1 = pd.DataFrame(&#123;<span class="string">&#x27;A&#x27;</span>:[<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;2&#x27;</span>], <span class="string">&#x27;B&#x27;</span>:[<span class="number">11</span>,<span class="number">12</span>]&#125;)</span><br><span class="line">df2 = pd.DataFrame(&#123;<span class="string">&#x27;A&#x27;</span>:[<span class="string">&#x27;2&#x27;</span>,<span class="string">&#x27;3&#x27;</span>], <span class="string">&#x27;C&#x27;</span>:[<span class="number">12</span>,<span class="number">13</span>]&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment"># left join</span></span><br><span class="line">df1.merge(df2,how=<span class="string">&#x27;left&#x27;</span>)</span><br><span class="line"><span class="comment">#   A  B  C</span></span><br><span class="line"><span class="comment">#   1 11  NaN</span></span><br><span class="line"><span class="comment">#   2 12  12.0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># right join</span></span><br><span class="line">df1.merge(df2,how=<span class="string">&#x27;left&#x27;</span>)</span><br><span class="line"><span class="comment">#   A  B     C</span></span><br><span class="line"><span class="comment">#   2 12.0  12</span></span><br><span class="line"><span class="comment">#   3 NaN   13</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># inner join</span></span><br><span class="line">df1.merge(df2,how=<span class="string">&#x27;inner&#x27;</span>)</span><br><span class="line"><span class="comment"># A  B   C</span></span><br><span class="line"><span class="comment"># 2  12  12</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># outer join</span></span><br><span class="line">df1.merge(df2,how=<span class="string">&#x27;outer&#x27;</span>)</span><br><span class="line"><span class="comment"># A B     C</span></span><br><span class="line"><span class="comment"># 1 11.0  NaN</span></span><br><span class="line"><span class="comment"># 2 12.0  12.0</span></span><br><span class="line"><span class="comment"># 3 NaN   13.0</span></span><br></pre></td></tr></table></figure>
<h3 id="GroupBy"><a href="#GroupBy" class="headerlink" title="GroupBy"></a>GroupBy</h3><p>GroupBy operator is to group dataframe by some column(s) and then perform aggregation.<br>Operators following by GroupBy:</p>
<ul>
<li>Agg: support multiple default aggregations {min, max, sum, mean, median, std, var, count}</li>
<li>Transform: perform aggregation functions on each group and return a DataFrame having the same indexes as the original object filled with the transformed values</li>
<li>Apply: apply the flexible functions to each group</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Create dataframe</span></span><br><span class="line">np.random.seed(<span class="number">2021</span>)</span><br><span class="line">company = [<span class="string">&#x27;A&#x27;</span>,<span class="string">&#x27;B&#x27;</span>]</span><br><span class="line">df = pd.DataFrame(&#123;<span class="string">&quot;company&quot;</span>: [company[i] <span class="keyword">for</span> i <span class="keyword">in</span> np.random.randint(<span class="number">0</span>,<span class="number">2</span>,<span class="number">10</span>)],</span><br><span class="line">                  <span class="string">&quot;salary&quot;</span>: np.random.randint(<span class="number">100</span>,<span class="number">1000</span>,<span class="number">10</span>)&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment"># groupby object</span></span><br><span class="line">df.groupby(by=<span class="string">&#x27;company&#x27;</span>)</span><br><span class="line"><span class="comment"># &lt;pandas.core.groupby.generic.DataFrameGroupBy object at 0x7f33aef16630&gt;</span></span><br><span class="line"><span class="comment"># It is a memory address. In order to check the data after groupby, we can use list.</span></span><br><span class="line"><span class="built_in">list</span>(df.groupby(by=<span class="string">&#x27;company&#x27;</span>))</span><br><span class="line"><span class="comment"># [(&#x27;A&#x27;,   company  salary</span></span><br><span class="line"><span class="comment">#   0       A     728</span></span><br><span class="line"><span class="comment">#   1       A     345</span></span><br><span class="line"><span class="comment">#   4       A     553</span></span><br><span class="line"><span class="comment">#   6       A     515</span></span><br><span class="line"><span class="comment">#   7       A     289), (&#x27;B&#x27;,   company  salary</span></span><br><span class="line"><span class="comment">#   2       B     915</span></span><br><span class="line"><span class="comment">#   3       B     146</span></span><br><span class="line"><span class="comment">#   5       B     483</span></span><br><span class="line"><span class="comment">#   8       B     452</span></span><br><span class="line"><span class="comment">#   9       B     461)]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># agg: minimum salary per company</span></span><br><span class="line">df.groupby(by=<span class="string">&#x27;company&#x27;</span>).agg(&#123;<span class="string">&#x27;salary&#x27;</span>:<span class="string">&#x27;min&#x27;</span>&#125;)</span><br><span class="line"><span class="comment">#           salary</span></span><br><span class="line"><span class="comment"># company</span></span><br><span class="line"><span class="comment"># A         202</span></span><br><span class="line"><span class="comment"># B         170</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># transform:</span></span><br><span class="line">df.groupby(by=<span class="string">&#x27;company&#x27;</span>)[<span class="string">&#x27;salary&#x27;</span>].transform(<span class="string">&#x27;min&#x27;</span>)</span><br><span class="line"><span class="comment"># 0    202</span></span><br><span class="line"><span class="comment"># 1    170</span></span><br><span class="line"><span class="comment"># 2    170</span></span><br><span class="line"><span class="comment"># 3    202</span></span><br><span class="line"><span class="comment"># 4    170</span></span><br><span class="line"><span class="comment"># 5    202</span></span><br><span class="line"><span class="comment"># 6    202</span></span><br><span class="line"><span class="comment"># 7    202</span></span><br><span class="line"><span class="comment"># 8    170</span></span><br><span class="line"><span class="comment"># 9    202</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">apply_min</span>(<span class="params">x</span>):</span></span><br><span class="line"> <span class="keyword">return</span> <span class="built_in">min</span>(x[<span class="string">&#x27;salary&#x27;</span>])</span><br><span class="line">df.groupby(by=<span class="string">&#x27;company&#x27;</span>).apply(apply_min)</span><br><span class="line"></span><br><span class="line"><span class="comment"># company</span></span><br><span class="line"><span class="comment"># A    202</span></span><br><span class="line"><span class="comment"># B    170</span></span><br></pre></td></tr></table></figure>
<h3 id="Reshape"><a href="#Reshape" class="headerlink" title="Reshape"></a>Reshape</h3><ul>
<li>If you want to gather columns into rows: melt.</li>
<li>If you want to append rows/columns: concat</li>
<li>If you want to spread rows into columns: pivot, pivot_table</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Create two dataframes</span></span><br><span class="line">df1 = pd.DataFrame(&#123;<span class="string">&#x27;A&#x27;</span>:[<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;2&#x27;</span>], <span class="string">&#x27;B&#x27;</span>:[<span class="number">11</span>,<span class="number">12</span>]&#125;)</span><br><span class="line">df2 = pd.DataFrame(&#123;<span class="string">&#x27;A&#x27;</span>:[<span class="string">&#x27;2&#x27;</span>,<span class="string">&#x27;3&#x27;</span>], <span class="string">&#x27;B&#x27;</span>:[<span class="number">12</span>,<span class="number">13</span>]&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment"># append rows</span></span><br><span class="line">pd.concat([df1,df2])</span><br><span class="line"><span class="comment">#   A B</span></span><br><span class="line"><span class="comment"># 0 1 11</span></span><br><span class="line"><span class="comment"># 1 2 12</span></span><br><span class="line"><span class="comment"># 0 2 12</span></span><br><span class="line"><span class="comment"># 1 3 13</span></span><br><span class="line"></span><br><span class="line">df1 = pd.DataFrame(&#123;<span class="string">&#x27;A&#x27;</span>:[<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;2&#x27;</span>], <span class="string">&#x27;B&#x27;</span>:[<span class="number">11</span>,<span class="number">12</span>]&#125;)</span><br><span class="line">df2 = pd.DataFrame(&#123;<span class="string">&#x27;C&#x27;</span>:[<span class="string">&#x27;2&#x27;</span>,<span class="string">&#x27;3&#x27;</span>], <span class="string">&#x27;D&#x27;</span>:[<span class="number">12</span>,<span class="number">13</span>]&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment"># append columns</span></span><br><span class="line">pd.concat([df1,df2],axis=<span class="number">1</span>)</span><br><span class="line"><span class="comment">#   A  B  C  D</span></span><br><span class="line"><span class="comment"># 0 1 11  2 12</span></span><br><span class="line"><span class="comment"># 1 2 12  3 13</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># melt</span></span><br><span class="line">pd.melt(df1)</span><br><span class="line"><span class="comment">#   variable  value</span></span><br><span class="line"><span class="comment"># 0    A      1</span></span><br><span class="line"><span class="comment"># 1    A      2</span></span><br><span class="line"><span class="comment"># 2    B      11</span></span><br><span class="line"><span class="comment"># 3    B      12</span></span><br><span class="line"></span><br><span class="line">df = pd.DataFrame(&#123;<span class="string">&#x27;A&#x27;</span>:[<span class="number">1</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">2</span>], <span class="string">&#x27;B&#x27;</span>:[<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>],<span class="string">&#x27;C&#x27;</span>:[<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>]&#125;)</span><br><span class="line">df.pivot_table(index=<span class="string">&#x27;A&#x27;</span>,columns=<span class="string">&#x27;B&#x27;</span>,values=<span class="string">&#x27;C&#x27;</span>,aggfunc=<span class="string">&#x27;mean&#x27;</span>)</span><br><span class="line"><span class="comment"># B 1 2</span></span><br><span class="line"><span class="comment"># A</span></span><br><span class="line"><span class="comment"># 1 0.0 1.0</span></span><br><span class="line"><span class="comment"># 2 1.0</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="Other-Common-Functions"><a href="#Other-Common-Functions" class="headerlink" title="Other Common Functions"></a>Other Common Functions</h2><ul>
<li>df.drop_duplicates(): remove duplicate rows</li>
<li>df.head(n): select first n rows</li>
<li>df.tail(n): select last n rows</li>
<li>df.sample(n): randomly select n rows</li>
<li>df.sort_values(by=’mpg’, ascending=False): order rows by values of a column</li>
<li>df.rename(‘columns’={‘y’:’year’}, inplace=True): rename the column ‘y’ to ‘year’</li>
<li>df.sort_index(): sort the index of a DataFrame</li>
<li>df.reset_index(): reset the index to row numbers &amp; move the index to columns</li>
<li>df.drop(columns=[‘length’, ‘height’]): drop columns</li>
<li>df[’year’].value_counts(normalize=True, sort=True, ascending=False, bins=None, dropna=True): return the distribution of unique values</li>
<li>df.dropna(axis=0, how=’any’, inplace=True): remove rows with missing values</li>
<li>df.fillna(0): Replace all NaN elements with 0s.</li>
<li>pd.cut(x=df[‘height’], bins=3, labels=[“bad”, “medium”, “good”]): Bin values into discrete intervals.</li>
</ul>
<h2 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h2><p>Pandas is a useful tool in python, which can perform I/O, subsetting, and manipulation. By reading this article, you are able to perform most data processings using DataFrame. </p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://hjsang.github.io/2021/01/02/Pandas-from-Zero-to-Hero/" data-id="ckjgg8dmd0002h5u29mvgglpw" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/source/tags/data-science/" rel="tag">data science</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/source/tags/pandas/" rel="tag">pandas</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Leetcode-236-Lowest-Common-Ancestor-of-a-Binary-Tree" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/12/26/Leetcode-236-Lowest-Common-Ancestor-of-a-Binary-Tree/" class="article-date">
  <time datetime="2020-12-26T16:09:59.000Z" itemprop="datePublished">2020-12-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/12/26/Leetcode-236-Lowest-Common-Ancestor-of-a-Binary-Tree/">Leetcode 236: Lowest Common Ancestor of a Binary Tree</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Medium</p>
<p>Given a binary tree, find the lowest common ancestor (LCA) of two given nodes in the tree.</p>
<p>According to the definition of LCA on Wikipedia: “The lowest common ancestor is defined between two nodes p and q as the lowest node in T that has both p and q as descendants (where we allow a node to be a descendant of itself).”</p>
<p><strong>Example 1</strong>:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">       3</span><br><span class="line">      &#x2F; \</span><br><span class="line">    5     1</span><br><span class="line">  &#x2F;  \   &#x2F; \</span><br><span class="line">6     2 0   8</span><br><span class="line">     &#x2F; \</span><br><span class="line">    7   4</span><br></pre></td></tr></table></figure><br>Input: root = [3,5,1,6,2,0,8,null,null,7,4], p = 5, q = 1<br>Output: 3<br>Explanation: The LCA of nodes 5 and 1 is 3.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://hjsang.github.io/2020/12/26/Leetcode-236-Lowest-Common-Ancestor-of-a-Binary-Tree/" data-id="ckjgg8dly0000h5u218wwfrm5" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/source/tags/Leetcode/" rel="tag">Leetcode</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/source/tags/Tree/" rel="tag">Tree</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Wide-and-Deep-Learning-for-Recommender-Systems" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/12/25/Wide-and-Deep-Learning-for-Recommender-Systems/" class="article-date">
  <time datetime="2020-12-25T20:47:32.000Z" itemprop="datePublished">2020-12-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/12/25/Wide-and-Deep-Learning-for-Recommender-Systems/">Reading Note for  Wide and Deep Learning for Recommender Systems</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Paper link</strong>: <a target="_blank" rel="noopener" href="https://arxiv.org/pdf/1606.07792.pdf">Wide &amp; Deep Learning for Recommender Systems</a></p>
<h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><ul>
<li>The input features are sparse</li>
<li>Memorization of feature interactions through a wide set of <strong>cross-product</strong> feature transformations are effective and interpretable. However, generalization requires more feature engineering effort.</li>
<li>Deep neural networks can generalize better to unseen feature combinations through <strong>low-dimensional dense embeddings</strong> learned from the sparse features.</li>
<li>Therefore, this paper combines two: jointly train wide linear models and deep neural networks.</li>
</ul>
<h2 id="Model-Architecture"><a href="#Model-Architecture" class="headerlink" title="Model Architecture"></a>Model Architecture</h2><p><img src="https://1.bp.blogspot.com/-Dw1mB9am1l8/V3MgtOzp3uI/AAAAAAAABGs/mP-3nZQCjWwdk6qCa5WraSpK8A7rSPj3ACLcB/s1600/image04.png" alt="Image"></p>
<h3 id="Wide-Component"><a href="#Wide-Component" class="headerlink" title="Wide Component"></a>Wide Component</h3><ul>
<li>Assume y is the prediction and <strong>x</strong> is a vector of d features. The wide component is a generalized linear model of the form <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">y &#x3D; w^T x + b</span><br></pre></td></tr></table></figure></li>
<li>One of the most important transformations is the <strong>cross-product</strong> transformation. For binary features, a cross-product transformation “AND( gender=male, language=en)” is 1 only if gender is male and language is en.</li>
</ul>
<p><img src="https://miro.medium.com/max/700/1*XHvOuICw2E9inCJJxIyKUg.png" alt="image"></p>
<h3 id="Deep-Componennt"><a href="#Deep-Componennt" class="headerlink" title="Deep Componennt"></a>Deep Componennt</h3><ul>
<li>Each of these sparse high-dimensional categorical features are first converted into a low-dimensional and dense real-valued vector</li>
<li>Those low-dimensional vectors are then fed into a hidden layers and a neural network</li>
</ul>
<h3 id="Application"><a href="#Application" class="headerlink" title="Application"></a>Application</h3><p><img src="https://raw.githubusercontent.com/HJSang/hjsang.github.io/main/medias/image/wide_deep_model.png" alt="image"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://hjsang.github.io/2020/12/25/Wide-and-Deep-Learning-for-Recommender-Systems/" data-id="ckj4sm31i000crdu2hqol9we4" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/source/tags/deep-learning/" rel="tag">deep learning</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/source/tags/paper/" rel="tag">paper</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/source/tags/recommender-system/" rel="tag">recommender system</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Leetcode-105-Construct-Binary-Tree-from-Preorder-and-InorderTraversal" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/12/25/Leetcode-105-Construct-Binary-Tree-from-Preorder-and-InorderTraversal/" class="article-date">
  <time datetime="2020-12-25T15:35:39.000Z" itemprop="datePublished">2020-12-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/12/25/Leetcode-105-Construct-Binary-Tree-from-Preorder-and-InorderTraversal/">Leetcode 105: Construct Binary Tree from Preorder and InorderTraversal</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Medium</p>
<p>Given preorder and inorder traversal of a tree, construct the binary tree.</p>
<p>Note:<br>You may assume that duplicates do not exist in the tree.</p>
<p>For example, given</p>
<p>preorder = [3,9,20,15,7]<br>inorder = [9,3,15,20,7]<br>Return the following binary tree:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">  3</span><br><span class="line"> &#x2F; \</span><br><span class="line">9   20</span><br><span class="line">   &#x2F; \</span><br><span class="line">  15  7</span><br></pre></td></tr></table></figure>
<p><strong>Solution</strong>:</p>
<ul>
<li>Please noet that: preorder =[root, root.left, root.right] and inorder = [root.left, root, root.right]. </li>
<li>root.left and root.right can be none</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">buildTree</span>(<span class="params">self, preorder: List[<span class="built_in">int</span>], inorder: List[<span class="built_in">int</span>]</span>) -&gt; TreeNode:</span></span><br><span class="line">        <span class="keyword">if</span> inorder:</span><br><span class="line">            root = TreeNode(preorder[<span class="number">0</span>])</span><br><span class="line">            ind = inorder.index(preorder[<span class="number">0</span>])</span><br><span class="line">            preorder.pop(<span class="number">0</span>)</span><br><span class="line">            root.left = self.buildTree(preorder,inorder[:ind])</span><br><span class="line">            root.right = self.buildTree(preorder,inorder[ind+<span class="number">1</span>:])</span><br><span class="line">            <span class="keyword">return</span> root</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">buildTree</span>(<span class="params">self, preorder: List[<span class="built_in">int</span>], inorder: List[<span class="built_in">int</span>]</span>) -&gt; TreeNode:</span></span><br><span class="line">        <span class="comment"># empty tree</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> preorder: <span class="keyword">return</span></span><br><span class="line">        <span class="comment"># Create ierator for preorder and inorder</span></span><br><span class="line">        preorder_iter, inorder_iter = <span class="built_in">iter</span>(preorder), <span class="built_in">iter</span>(inorder)</span><br><span class="line">        <span class="comment"># Initial root as the first element in preorder and initialize the current inorder val</span></span><br><span class="line">        root, curr_inorder_val = TreeNode(<span class="built_in">next</span>(preorder_iter)), <span class="built_in">next</span>(inorder_iter)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># stack is used to track left trees</span></span><br><span class="line">        <span class="comment"># build_right_tree is a flag to indicate if it is the time to build the right tree</span></span><br><span class="line">        stack, node, build_right_tree = [root], root, <span class="literal">False</span></span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                <span class="keyword">if</span> stack <span class="keyword">and</span> stack[-<span class="number">1</span>].val == curr_inorder_val:</span><br><span class="line">                    node = stack.pop() <span class="comment"># now it is the root node, and onto building its right tree.</span></span><br><span class="line">                    curr_inorder_val = <span class="built_in">next</span>(inorder_iter)</span><br><span class="line">                    build_right_tree = <span class="literal">True</span></span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    <span class="keyword">if</span> build_right_tree:</span><br><span class="line">                        node.right = TreeNode(<span class="built_in">next</span>(preorder_iter))</span><br><span class="line">                        node = node.right</span><br><span class="line">                        build_right_tree = <span class="literal">False</span></span><br><span class="line">                    <span class="keyword">else</span>:</span><br><span class="line">                        node.left = TreeNode(<span class="built_in">next</span>(preorder_iter))</span><br><span class="line">                        node = node.left</span><br><span class="line"></span><br><span class="line">                    stack.append(node)</span><br><span class="line">            <span class="keyword">except</span> StopIteration:</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> root</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://hjsang.github.io/2020/12/25/Leetcode-105-Construct-Binary-Tree-from-Preorder-and-InorderTraversal/" data-id="ckj4sm3140003rdu2dum3anr6" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/source/tags/Leetcode/" rel="tag">Leetcode</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/source/tags/Stack/" rel="tag">Stack</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/source/tags/Traversal/" rel="tag">Traversal</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/source/tags/Tree/" rel="tag">Tree</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Leetcode-124-Binary-Tree-Maximum-Path-Sum" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/12/25/Leetcode-124-Binary-Tree-Maximum-Path-Sum/" class="article-date">
  <time datetime="2020-12-25T14:42:28.000Z" itemprop="datePublished">2020-12-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/12/25/Leetcode-124-Binary-Tree-Maximum-Path-Sum/">Leetcode 124: Binary Tree Maximum Path Sum</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Hard</p>
<p>Given a non-empty binary tree, find the maximum path sum.</p>
<p>For this problem, a path is defined as any node sequence from some starting node to any node in the tree along the parent-child connections. The path must contain at least one node and does not need to go through the root.</p>
<p><strong>Example 1</strong>:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">  1</span><br><span class="line"> &#x2F; \</span><br><span class="line">2   3</span><br></pre></td></tr></table></figure><br><strong>Input</strong>: root = [1,2,3]<br><strong>Output</strong>: 6</p>
<p><strong>Constraints</strong>:</p>
<ul>
<li>The number of nodes in the tree is in the range [0, 3 * 10^4]</li>
<li>-1000 &lt;= Node.val &lt;= 1000</li>
</ul>
<p><strong>Solution</strong>:</p>
<ul>
<li>Get the inorder tree traversal: Recursive or Iterative way </li>
<li><p>Find the maximum summation of sub-array</p>
<ul>
<li>DP: get the maximum summation of the subarray ending with the curent element </li>
<li>dp[i+1] = max(dp[i],0) + nums[i+1]</li>
</ul>
</li>
<li><p>For this problem, we can use the similar idea. Traversal the tree and max value is the max(lef, right, left+node.val+right)</p>
</li>
<li>the DP idea: the maximum summation of path values starting or ending with the node: max(node.val + max(left,right),0)</li>
</ul>
<p><strong>Recursive Inorder code</strong>:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">maxPathSum</span>(<span class="params">self, root</span>):</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        :type root: TreeNode</span></span><br><span class="line"><span class="string">        :rtype: int</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">maxend</span>(<span class="params">node</span>):</span></span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> node:</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">            left = maxend(node.left)</span><br><span class="line">            right = maxend(node.right)</span><br><span class="line">            self.<span class="built_in">max</span> = <span class="built_in">max</span>(self.<span class="built_in">max</span>, left + node.val + right)</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">max</span>(node.val + <span class="built_in">max</span>(left, right), <span class="number">0</span>)</span><br><span class="line">        self.<span class="built_in">max</span> = -<span class="built_in">float</span>(<span class="string">&#x27;inf&#x27;</span>)</span><br><span class="line">        maxend(root)</span><br><span class="line">        <span class="keyword">return</span> self.<span class="built_in">max</span></span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://hjsang.github.io/2020/12/25/Leetcode-124-Binary-Tree-Maximum-Path-Sum/" data-id="ckj4sm31a0006rdu2hhw79q46" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/source/tags/Binary-Tree/" rel="tag">Binary Tree</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/source/tags/Leetcode/" rel="tag">Leetcode</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/source/tags/Tree/" rel="tag">Tree</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/source/tags/Tree-Traversal/" rel="tag">Tree Traversal</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Leetcode-297-Serialize-and-Deserialize-Binary-Tree" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/12/24/Leetcode-297-Serialize-and-Deserialize-Binary-Tree/" class="article-date">
  <time datetime="2020-12-24T21:26:28.000Z" itemprop="datePublished">2020-12-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/12/24/Leetcode-297-Serialize-and-Deserialize-Binary-Tree/">Leetcode 297: Serialize and Deserialize Binary Tree</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Hard</p>
<p>Serialization is the process of converting a data structure or object into a sequence of bits so that it can be stored in a file or memory buffer, or transmitted across a network connection link to be reconstructed later in the same or another computer environment.</p>
<p>Design an algorithm to serialize and deserialize a binary tree. There is no restriction on how your serialization/deserialization algorithm should work. You just need to ensure that a binary tree can be serialized to a string and this string can be deserialized to the original tree structure.</p>
<p>Clarification: The input/output format is the same as how LeetCode serializes a binary tree. You do not necessarily need to follow this format, so please be creative and come up with different approaches yourself.</p>
<p><strong>Example 1</strong>:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">   1</span><br><span class="line"> &#x2F;  \</span><br><span class="line">2    3</span><br><span class="line">    &#x2F; \</span><br><span class="line">   4   5</span><br></pre></td></tr></table></figure><br>Input: root = [1,2,3,null,null,4,5]<br>Output: [1,2,3,null,null,4,5]</p>
<p><strong>Idea</strong>:</p>
<ul>
<li>We need to traversal the tree. Hence, consider BFS or DFS</li>
<li>We need to recustruct the tree from the serialized string. Hence, we need two key information: separating char and tree structure.</li>
<li>Given a string, we can split them by any special char, saying ‘#’.</li>
<li>For the tree structure, we need to know: left and right nodes. Hence, we need the order information.</li>
</ul>
<p><strong>BFS python code</strong>:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"># class TreeNode(object):</span></span><br><span class="line"><span class="comment">#     def __init__(self, x):</span></span><br><span class="line"><span class="comment">#         self.val = x</span></span><br><span class="line"><span class="comment">#         self.left = None</span></span><br><span class="line"><span class="comment">#         self.right = None</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Codec</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">serialize</span>(<span class="params">self, root</span>):</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;Encodes a tree to a single string.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        :type root: TreeNode</span></span><br><span class="line"><span class="string">        :rtype: str</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> root:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">        res = []</span><br><span class="line">        curNode = [root]</span><br><span class="line">        <span class="keyword">while</span> curNode:</span><br><span class="line">            nextNode = []</span><br><span class="line">            <span class="keyword">for</span> node <span class="keyword">in</span> curNode:</span><br><span class="line">                res.append(<span class="built_in">str</span>(node.val) <span class="keyword">if</span> node <span class="keyword">else</span> <span class="string">&#x27;#&#x27;</span>)</span><br><span class="line">                <span class="keyword">if</span> node:</span><br><span class="line">                    nextNode.append(node.left)</span><br><span class="line">                    nextNode.append(node.right)</span><br><span class="line">            curNode = nextNode</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;.&#x27;</span>.join(res)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">deserialize</span>(<span class="params">self, data</span>):</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;Decodes your encoded data to tree.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        :type data: str</span></span><br><span class="line"><span class="string">        :rtype: TreeNode</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> data:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">        res = data.split(<span class="string">&#x27;.&#x27;</span>)</span><br><span class="line">        ind = <span class="number">1</span></span><br><span class="line">        head = TreeNode(<span class="built_in">int</span>(res[<span class="number">0</span>]))</span><br><span class="line">        curNode = [head]</span><br><span class="line">        <span class="keyword">while</span> curNode:</span><br><span class="line">            nextNode = []</span><br><span class="line">            <span class="keyword">for</span> node <span class="keyword">in</span> curNode:</span><br><span class="line">                <span class="keyword">if</span> res[ind]!=<span class="string">&#x27;#&#x27;</span>:</span><br><span class="line">                    nd=TreeNode(<span class="built_in">int</span>(res[ind]))</span><br><span class="line">                    nextNode.append(nd)</span><br><span class="line">                    node.left = nd</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    node.left = <span class="literal">None</span></span><br><span class="line">                ind +=<span class="number">1</span></span><br><span class="line">                <span class="keyword">if</span> res[ind] == <span class="string">&#x27;#&#x27;</span>:</span><br><span class="line">                    node.right = <span class="literal">None</span></span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    nd = TreeNode(<span class="built_in">int</span>(res[ind]))</span><br><span class="line">                    nextNode.append(nd)</span><br><span class="line">                    node.right = nd</span><br><span class="line">                ind +=<span class="number">1</span></span><br><span class="line">            curNode = nextNode</span><br><span class="line">        <span class="keyword">return</span> head</span><br></pre></td></tr></table></figure>
<p><strong> recursive DFS python code </strong>:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Codec</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">serialize</span>(<span class="params">self, root</span>):</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;Encodes a tree to a single string.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        :type root: TreeNode</span></span><br><span class="line"><span class="string">        :rtype: str</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">rserialize</span>(<span class="params">root,string</span>):</span></span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> root:</span><br><span class="line">                string += <span class="string">&#x27;#.&#x27;</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                string += <span class="built_in">str</span>(root.val) + <span class="string">&#x27;.&#x27;</span></span><br><span class="line">                string = rserialize(root.left, string)</span><br><span class="line">                string = rserialize(root.right, string)</span><br><span class="line">            <span class="keyword">return</span> string</span><br><span class="line">        <span class="keyword">return</span> rserialize(root, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">deserialize</span>(<span class="params">self, data</span>):</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;Decodes your encoded data to tree.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        :type data: str</span></span><br><span class="line"><span class="string">        :rtype: TreeNode</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">rdeserialize</span>(<span class="params">l</span>):</span></span><br><span class="line">            <span class="keyword">if</span> l[<span class="number">0</span>] == <span class="string">&#x27;#&#x27;</span>:</span><br><span class="line">                l.popleft()</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">            root = TreeNode(<span class="built_in">int</span>(l[<span class="number">0</span>]))</span><br><span class="line">            l.popleft()</span><br><span class="line">            root.left = rdeserialize(l)</span><br><span class="line">            root.right = rdeserialize(l)</span><br><span class="line">            <span class="keyword">return</span> root</span><br><span class="line">        dlist = collections.deque(data.split(<span class="string">&#x27;.&#x27;</span>))</span><br><span class="line">        root = rdeserialize(dlist)</span><br><span class="line">        <span class="keyword">return</span> root</span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://hjsang.github.io/2020/12/24/Leetcode-297-Serialize-and-Deserialize-Binary-Tree/" data-id="ckj4sm31e0009rdu28i1f60q2" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/source/tags/BFS/" rel="tag">BFS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/source/tags/DFS/" rel="tag">DFS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/source/tags/Leetcode/" rel="tag">Leetcode</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/source/tags/Tree/" rel="tag">Tree</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/2/">&amp;laquo; 上一页</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/4/">下一页 &amp;raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/source/tags/Algorithm/" rel="tag">Algorithm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/source/tags/BFS/" rel="tag">BFS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/source/tags/Binary-Search/" rel="tag">Binary Search</a></li><li class="tag-list-item"><a class="tag-list-link" href="/source/tags/Binary-Tree/" rel="tag">Binary Tree</a></li><li class="tag-list-item"><a class="tag-list-link" href="/source/tags/CF/" rel="tag">CF</a></li><li class="tag-list-item"><a class="tag-list-link" href="/source/tags/CTR-prediction/" rel="tag">CTR prediction</a></li><li class="tag-list-item"><a class="tag-list-link" href="/source/tags/DFS/" rel="tag">DFS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/source/tags/Deep-Crossing/" rel="tag">Deep Crossing</a></li><li class="tag-list-item"><a class="tag-list-link" href="/source/tags/DeepFM/" rel="tag">DeepFM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/source/tags/Hard/" rel="tag">Hard</a></li><li class="tag-list-item"><a class="tag-list-link" href="/source/tags/Implicit-relevance-feedback/" rel="tag">Implicit relevance feedback</a></li><li class="tag-list-item"><a class="tag-list-link" href="/source/tags/LeetCode/" rel="tag">LeetCode</a></li><li class="tag-list-item"><a class="tag-list-link" href="/source/tags/Leetcode/" rel="tag">Leetcode</a></li><li class="tag-list-item"><a class="tag-list-link" href="/source/tags/Linked-list/" rel="tag">Linked list</a></li><li class="tag-list-item"><a class="tag-list-link" href="/source/tags/Math/" rel="tag">Math</a></li><li class="tag-list-item"><a class="tag-list-link" href="/source/tags/Medium/" rel="tag">Medium</a></li><li class="tag-list-item"><a class="tag-list-link" href="/source/tags/Paper-reading-notes/" rel="tag">Paper reading notes</a></li><li class="tag-list-item"><a class="tag-list-link" href="/source/tags/Recommendation-system/" rel="tag">Recommendation system</a></li><li class="tag-list-item"><a class="tag-list-link" href="/source/tags/Recommendation-systems/" rel="tag">Recommendation systems</a></li><li class="tag-list-item"><a class="tag-list-link" href="/source/tags/Stack/" rel="tag">Stack</a></li><li class="tag-list-item"><a class="tag-list-link" href="/source/tags/Traversal/" rel="tag">Traversal</a></li><li class="tag-list-item"><a class="tag-list-link" href="/source/tags/Tree/" rel="tag">Tree</a></li><li class="tag-list-item"><a class="tag-list-link" href="/source/tags/Tree-Traversal/" rel="tag">Tree Traversal</a></li><li class="tag-list-item"><a class="tag-list-link" href="/source/tags/Two-pointers/" rel="tag">Two pointers</a></li><li class="tag-list-item"><a class="tag-list-link" href="/source/tags/Web-Search/" rel="tag">Web Search</a></li><li class="tag-list-item"><a class="tag-list-link" href="/source/tags/Web-search-ranking/" rel="tag">Web search ranking</a></li><li class="tag-list-item"><a class="tag-list-link" href="/source/tags/Wide-Deep/" rel="tag">Wide & Deep</a></li><li class="tag-list-item"><a class="tag-list-link" href="/source/tags/bfs/" rel="tag">bfs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/source/tags/data-science/" rel="tag">data science</a></li><li class="tag-list-item"><a class="tag-list-link" href="/source/tags/deep-learning/" rel="tag">deep learning</a></li><li class="tag-list-item"><a class="tag-list-link" href="/source/tags/dfs/" rel="tag">dfs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/source/tags/pandas/" rel="tag">pandas</a></li><li class="tag-list-item"><a class="tag-list-link" href="/source/tags/paper/" rel="tag">paper</a></li><li class="tag-list-item"><a class="tag-list-link" href="/source/tags/recommender-system/" rel="tag">recommender system</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/source/tags/Algorithm/" style="font-size: 10px;">Algorithm</a> <a href="/source/tags/BFS/" style="font-size: 10px;">BFS</a> <a href="/source/tags/Binary-Search/" style="font-size: 10px;">Binary Search</a> <a href="/source/tags/Binary-Tree/" style="font-size: 10px;">Binary Tree</a> <a href="/source/tags/CF/" style="font-size: 10px;">CF</a> <a href="/source/tags/CTR-prediction/" style="font-size: 14px;">CTR prediction</a> <a href="/source/tags/DFS/" style="font-size: 10px;">DFS</a> <a href="/source/tags/Deep-Crossing/" style="font-size: 10px;">Deep Crossing</a> <a href="/source/tags/DeepFM/" style="font-size: 10px;">DeepFM</a> <a href="/source/tags/Hard/" style="font-size: 10px;">Hard</a> <a href="/source/tags/Implicit-relevance-feedback/" style="font-size: 10px;">Implicit relevance feedback</a> <a href="/source/tags/LeetCode/" style="font-size: 12px;">LeetCode</a> <a href="/source/tags/Leetcode/" style="font-size: 20px;">Leetcode</a> <a href="/source/tags/Linked-list/" style="font-size: 10px;">Linked list</a> <a href="/source/tags/Math/" style="font-size: 12px;">Math</a> <a href="/source/tags/Medium/" style="font-size: 10px;">Medium</a> <a href="/source/tags/Paper-reading-notes/" style="font-size: 10px;">Paper reading notes</a> <a href="/source/tags/Recommendation-system/" style="font-size: 14px;">Recommendation system</a> <a href="/source/tags/Recommendation-systems/" style="font-size: 10px;">Recommendation systems</a> <a href="/source/tags/Stack/" style="font-size: 18px;">Stack</a> <a href="/source/tags/Traversal/" style="font-size: 10px;">Traversal</a> <a href="/source/tags/Tree/" style="font-size: 16px;">Tree</a> <a href="/source/tags/Tree-Traversal/" style="font-size: 10px;">Tree Traversal</a> <a href="/source/tags/Two-pointers/" style="font-size: 10px;">Two pointers</a> <a href="/source/tags/Web-Search/" style="font-size: 10px;">Web Search</a> <a href="/source/tags/Web-search-ranking/" style="font-size: 10px;">Web search ranking</a> <a href="/source/tags/Wide-Deep/" style="font-size: 10px;">Wide & Deep</a> <a href="/source/tags/bfs/" style="font-size: 10px;">bfs</a> <a href="/source/tags/data-science/" style="font-size: 10px;">data science</a> <a href="/source/tags/deep-learning/" style="font-size: 10px;">deep learning</a> <a href="/source/tags/dfs/" style="font-size: 10px;">dfs</a> <a href="/source/tags/pandas/" style="font-size: 10px;">pandas</a> <a href="/source/tags/paper/" style="font-size: 12px;">paper</a> <a href="/source/tags/recommender-system/" style="font-size: 10px;">recommender system</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">一月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">十二月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">十一月 2020</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/01/18/Note-for-DeepFM-A-Factorization-Machine-based-Neural-Network-for-CTR-Prediction/">Note for DeepFM: A Factorization-Machine based Neural Network for CTR Prediction</a>
          </li>
        
          <li>
            <a href="/2021/01/18/Leetcode-2-Add-Two-Numbers/">Leetcode 2: Add Two Numbers</a>
          </li>
        
          <li>
            <a href="/2021/01/18/Leetcode-829-Consecutive-Numbers-Sum/">Leetcode 829: Consecutive Numbers Sum</a>
          </li>
        
          <li>
            <a href="/2021/01/16/Note-for-Deep-Crossing/">Note for Deep Crossing</a>
          </li>
        
          <li>
            <a href="/2021/01/16/Note-for-AutoRec-Autoencoders-Meet-Collaborative-Filtering/">Note for AutoRec: Autoencoders Meet Collaborative Filtering</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2021 Hejian Sang<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>